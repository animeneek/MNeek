<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieNeek - Stream Movies & TV Shows</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="icon" href="https://github.com/animeneek/MN/blob/main/assets/Movieneek_Raider%20Crusader_001.png?raw=true">
</head>
<body class="bg-dark text-white">
    <!-- Desktop Navigation -->
    <nav class="navbar hidden md:flex items-center justify-between">
        <div class="flex items-center space-x-8">
            <a href="index.html" class="flex items-center">
                <img src="https://github.com/animeneek/MN/blob/main/assets/Movieneek_Raider%20Crusader_001.png?raw=true" 
                     alt="MovieNeek" 
                     class="h-10">
            </a>
            <div class="flex space-x-6">
                <a href="index.html" class="hover:text-accent">Home</a>
                <a href="movies.html" class="hover:text-accent">Movies</a>
                <a href="tvshows.html" class="hover:text-accent">TV Shows</a>
            </div>
        </div>
        <div class="relative w-64">
            <input type="text" 
                   id="searchInput"
                   placeholder="Search movies or TV shows..." 
                   class="bg-darkest text-sm px-4 py-2 rounded-full w-full focus:outline-none focus:ring-2 focus:ring-accent">
            <div id="searchResults" class="hidden absolute top-12 left-0 right-0 bg-darkest rounded-lg shadow-lg z-50 p-4 max-h-96 overflow-y-auto"></div>
        </div>
    </nav>

    <!-- Hero Slider -->
    <div id="heroSlider" class="relative"></div>

    <main class="container mx-auto px-4 py-8">
        <!-- Trending Movies -->
        <section class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Trending Movies</h2>
                <a href="movies.html" class="text-accent hover:underline">View All</a>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6" id="trendingMovies">
                <!-- JS will populate this -->
            </div>
        </section>

        <!-- Popular TV Shows -->
        <section class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Popular TV Shows</h2>
                <a href="tvshows.html" class="text-accent hover:underline">View All</a>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6" id="popularShows">
                <!-- JS will populate this -->
            </div>
        </section>
    </main>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav md:hidden flex justify-around">
        <a href="index.html" class="flex flex-col items-center p-2 text-accent">
            <i class="fas fa-home text-xl"></i>
            <span class="text-xs mt-1">Home</span>
        </a>
        <a href="movies.html" class="flex flex-col items-center p-2">
            <i class="fas fa-film text-xl"></i>
            <span class="text-xs mt-1">Movies</span>
        </a>
        <a href="tvshows.html" class="flex flex-col items-center p-2">
            <i class="fas fa-tv text-xl"></i>
            <span class="text-xs mt-1">TV Shows</span>
        </a>
    </nav>

    <script src="assets/js/main.js"></script>
    <script>
        // Fetch and display trending movies
        async function fetchTrendingMovies() {
            const { results } = await fetchTMDB('trending/movie/week');
            if (!results) return;
            
            const container = document.getElementById('trendingMovies');
            container.innerHTML = results.slice(0, 10).map(movie => `
                <a href="details.html?id=${movie.id}&type=movie" class="movie-card block">
                    <div class="relative rounded-lg overflow-hidden aspect-[2/3] mb-2">
                        <img src="${movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 'https://via.placeholder.com/500x750'}" 
                             alt="${movie.title}" 
                             class="movie-poster w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 hover:opacity-100 transition duration-300 flex items-end p-3">
                            <div>
                                <h3 class="font-semibold">${movie.title}</h3>
                                <p class="text-xs text-gray-300">${movie.release_date ? movie.release_date.substring(0, 4) : ''}</p>
                            </div>
                        </div>
                    </div>
                </a>
            `).join('');
        }
        
        // Fetch and display popular TV shows
        async function fetchPopularShows() {
            const { results } = await fetchTMDB('tv/popular');
            if (!results) return;
            
            const container = document.getElementById('popularShows');
            container.innerHTML = results.slice(0, 10).map(show => `
                <a href="details.html?id=${show.id}&type=tv" class="movie-card block">
                    <div class="relative rounded-lg overflow-hidden aspect-[2/3] mb-2">
                        <img src="${show.poster_path ? `https://image.tmdb.org/t/p/w500${show.poster_path}` : 'https://via.placeholder.com/500x750'}" 
                             alt="${show.name}" 
                             class="movie-poster w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 hover:opacity-100 transition duration-300 flex items-end p-3">
                            <div>
                                <h3 class="font-semibold">${show.name}</h3>
                                <p class="text-xs text-gray-300">${show.first_air_date ? show.first_air_date.substring(0, 4) : ''}</p>
                            </div>
                        </div>
                    </div>
                </a>
            `).join('');
        }
        
        // Initialize page-specific content
        document.addEventListener('DOMContentLoaded', () => {
            fetchTrendingMovies();
            fetchPopularShows();
        });
    </script>
</body>
</html>
